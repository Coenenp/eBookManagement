{% extends "books/base_split_pane.html" %}
{% load static %}
{% load book_extras %}

{% block title %}Series - {{ block.super }}{% endblock %}

{% block list_icon %}fas fa-layer-group{% endblock %}
{% block list_title %}Series{% endblock %}
{% block item_count %}{{ series_count }}{% endblock %}

{% block search_placeholder %}Search series by name, author...{% endblock %}

{% block format_options %}
<option value="epub">EPUB</option>
<option value="pdf">PDF</option>
<option value="mobi">MOBI</option>
<option value="azw">AZW</option>
<option value="azw3">AZW3</option>
<option value="fb2">FB2</option>
<option value="lit">LIT</option>
<option value="prc">PRC</option>
{% endblock %}

{% block items_list %}
<div id="series-list-container">
    <!-- Series will be loaded via AJAX -->
</div>
{% endblock %}

{% block detail_content %}
<div id="series-detail-container" class="h-100 d-flex align-items-center justify-content-center">
    <div class="text-center text-muted">
        <i class="fas fa-layer-group fa-3x mb-3"></i>
        <h5>Select a series to view details</h5>
        <p class="mb-0">Choose a series from the list to see detailed information and books.</p>
    </div>
</div>
{% endblock %}

{% block extra_js %}
{{ block.super }}
<script>
// User preferences from profile
window.userItemsPerPage = {{ items_per_page }};
window.userDefaultViewMode = '{{ default_view_mode }}';

// Configuration for series section
window.seriesConfig = {
    ajax_urls: {
        list: '{% url "books:series_ajax_list" %}',
        detail: '/series/ajax/detail/{id}/',
        mark_read: '{% url "books:series_ajax_mark_read" %}',
        toggle_read: '{% url "books:ebooks_ajax_toggle_read" %}',
        book_detail: '/ebooks/ajax/detail/{id}/',
        download_book: '/ebooks/ajax/download/{id}/',
        book_list: '{% url "books:book_list" %}'
    }
};
</script>
<script src="{% static 'book/js/media-library-utils.js' %}"></script>
<script src="{% static 'book/js/base-section-manager.js' %}"></script>
<script src="{% static 'book/js/series-section.js' %}"></script>
<script src="{% static 'book/js/series-section-init.js' %}"></script>
{% endblock %}