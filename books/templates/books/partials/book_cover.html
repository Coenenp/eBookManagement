{% load static %}
{% load custom_filters %}

<div class="position-relative d-inline-block cover-wrapper cover-{{ size }}">
  <div class="cover-container cover-{{ size }}">
    {% if base64_image %}
      <img src="{{ base64_image }}"
           alt="Cover for {{ book|get_display_title }}"
           class="cover-image"
           decoding="async">
    {% elif is_url %}
      {% if 'google.com' in cover_path %}
      <img src="{{ cover_path|safe }}"
           alt="Cover for {{ book|get_display_title }}"
           class="cover-image"
           decoding="async"
           referrerpolicy="no-referrer">
      {% else %}
      <img src="{{ cover_path|safe }}"
           alt="Cover for {{ book|get_display_title }}"
           class="cover-image"
           decoding="async"
           crossorigin="anonymous">
      {% endif %}
    {% elif cover_path %}
      {% if "/media/" in cover_path %}
        <img src="{{ cover_path }}"
             alt="Cover for {{ book|get_display_title }}"
             class="cover-image"
             decoding="async">
      {% else %}
        <img src="{% static cover_path %}"
             alt="Cover for {{ book|get_display_title }}"
             class="cover-image"
             decoding="async">
      {% endif %}
    {% else %}
      <div class="cover-placeholder cover-{{ size }}">
        <div class="text-center">
          <i class="fas fa-book fa-2x mb-2"></i>
          <div class="small">No Cover</div>
        </div>
      </div>
    {% endif %}
  </div>

  {% if badge %}
    <span class="position-absolute top-0 start-0 translate-middle badge rounded-pill bg-primary">
      {{ badge }}
    </span>
  {% endif %}
</div>